{-# LANGUAGE DataKinds #-}
-- | AST generated by the introduction of de Bruijn indices.
module Pukeko.Language.TypeResolver.AST
  ( Module
  , TopLevel (..)
  , Defn
  , Expr
  , Altn
  , Patn
  ) where

import qualified Data.Vector.Sized as Vec

import           Pukeko.Pos
import           Pukeko.Language.AST.Std
import qualified Pukeko.Language.AST.ConDecl as Con
import qualified Pukeko.Language.Ident       as Id
import qualified Pukeko.Language.Type        as Ty

data TYPERESOLVER

instance Stage TYPERESOLVER where
  type StageId     TYPERESOLVER = 200
  type StdTopLevel TYPERESOLVER = TopLevel

data TopLevel
  =           TypDef Pos [Con.TConDecl]
  |           Val    Pos Id.EVar (Ty.Type Ty.Closed)
  | forall n. TopLet Pos (Vec.Vector n (Defn Id.EVar))
  | forall n. TopRec Pos (Vec.Vector n (Defn (FinScope n Id.EVar)))
  |           Asm    Pos Id.EVar String

type Module = StdModule TYPERESOLVER
type Defn = StdDefn TYPERESOLVER
type Expr = StdExpr TYPERESOLVER
type Altn = StdAltn TYPERESOLVER
type Patn = StdPatn TYPERESOLVER
